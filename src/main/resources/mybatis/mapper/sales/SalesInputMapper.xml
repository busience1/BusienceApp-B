<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	 
<mapper namespace="com.busience.salesLX.dao.SalesInputDao">
	<select id="salesInputListDao" resultType="com.busience.standard.dto.ItemDto">
		select PRODUCT_ITEM_CODE, PRODUCT_ITEM_NAME, PRODUCT_INFO_STND_1
		from PRODUCT_INFO_TBL
		where PRODUCT_MTRL_CLSFC = 28
	</select>
	
	<select id="salesInMatSelectDao" resultType="com.busience.salesLX.dto.Sales_InMat_tbl">
		SELECT sit.*, pit.Product_Item_Name as Sales_InMat_Name, pit.Product_Info_STND_1 as Sales_InMat_STND_1, dt.Child_TBL_Type as Sales_InMat_Item_Clsfc_1, dt1.Child_TBL_Type as Sales_InMat_Rcv_Clsfc_Name
		FROM Sales_InMat_tbl sit
		INNER JOIN Product_Info_tbl pit ON sit.Sales_InMat_Code = pit.Product_Item_Code
		INNER JOIN DTL_TBL dt ON pit.Product_Item_CLSFC_1 = dt.Child_TBL_No
		INNER JOIN DTL_TBL dt1 ON sit.Sales_InMat_Rcv_Clsfc = dt1.Child_TBL_No
		WHERE date(sit.Sales_InMat_Date) = DATE_FORMAT(NOW(),'%Y-%m-%d')
		ORDER BY sit.Sales_InMat_Date ASC
	</select>
	
	<insert id="salesInMatInsertDao">
		insert into Sales_InMat_tbl(
			Sales_InMat_No, Sales_InMat_Lot_No, Sales_InMat_Code, Sales_InMat_Qty, Sales_InMat_Date,
			Sales_InMat_Rcv_Clsfc, Sales_InMat_dInsert_Time, Sales_InMat_Modifier
		)values(
			#{Sales_InMat_No}, #{Sales_InMat_Lot_No}, #{Sales_InMat_Code}, #{Sales_InMat_Qty}, now(),
			#{Sales_InMat_Rcv_Clsfc}, now(), #{Sales_InMat_Modifier}
		)
	</insert>

</mapper>